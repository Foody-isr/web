import { ImageResponse } from "next/og";
import { NextRequest } from "next/server";

export const runtime = "edge";

export async function GET(request: NextRequest) {
  const { searchParams } = new URL(request.url);
  const restaurantName = searchParams.get("name") || "Foody";
  const description = searchParams.get("description") || "Order your favorite food online";

  return new ImageResponse(
    (
      <div
        style={{
          height: "100%",
          width: "100%",
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          justifyContent: "center",
          backgroundColor: "#121316",
          backgroundImage: "linear-gradient(135deg, #121316 0%, #202125 50%, #121316 100%)",
          fontFamily: "sans-serif",
        }}
      >
        {/* Logo icon */}
        <div
          style={{
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            marginBottom: 40,
          }}
        >
          <svg
            width="120"
            height="120"
            viewBox="0 0 24 24"
            fill="none"
          >
            <g fill="#f18a47">
              <path d="M12,19c-3.86,0-7-3.141-7-7s3.14-7,7-7s7,3.141,7,7S15.86,19,12,19z M12,6c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6S15.309,6,12,6z" />
              <path d="M20.462,24.001c-0.656,0-1.346-0.203-1.973-0.615l-3.291-2.487c-0.22-0.166-0.264-0.479-0.097-0.7s0.479-0.265,0.701-0.097l3.263,2.468c0.915,0.598,2.023,0.581,2.667-0.063l0.775-0.775c0.644-0.644,0.661-1.752,0.043-2.695l-2.449-3.234c-0.167-0.221-0.123-0.534,0.097-0.7c0.22-0.167,0.533-0.124,0.701,0.097l2.468,3.263c0.899,1.371,0.828,2.996-0.154,3.978l-0.775,0.775C21.916,23.736,21.21,24.001,20.462,24.001z" />
              <path d="M18.629,23.371c-0.276,0-0.5-0.224-0.5-0.5c0-0.272,0.218-0.494,0.49-0.5c0.039-0.003,0.945-0.082,2.308-1.444c1.39-1.391,1.444-2.298,1.444-2.307c0.012-0.271,0.219-0.493,0.509-0.485c0.271,0.006,0.49,0.22,0.491,0.491c0.001,0.129-0.042,1.312-1.737,3.008C19.945,23.322,18.759,23.371,18.629,23.371z" />
              <path d="M16.5,21c-0.128,0-0.256-0.049-0.354-0.146c-0.195-0.195-0.195-0.512,0-0.707l4-4c0.195-0.195,0.512-0.195,0.707,0s0.195,0.512,0,0.707l-4,4C16.756,20.951,16.628,21,16.5,21z" />
              <path d="M3.5,9C3.349,9,3.2,8.932,3.101,8.802L0.633,5.539c-0.899-1.371-0.828-2.996,0.154-3.978l0.775-0.775c0.982-0.981,2.607-1.054,3.949-0.172l3.291,2.487c0.22,0.166,0.264,0.479,0.097,0.7c-0.167,0.22-0.481,0.263-0.701,0.097L4.935,1.431C4.02,0.833,2.912,0.85,2.269,1.493L1.494,2.269C0.85,2.912,0.833,4.021,1.45,4.964l2.449,3.234c0.167,0.221,0.123,0.534-0.097,0.7C3.711,8.967,3.605,9,3.5,9z" />
              <path d="M1.129,5.865c-0.003,0-0.006,0-0.009,0c-0.271-0.006-0.49-0.22-0.491-0.491C0.628,5.245,0.67,4.063,2.366,2.366c1.688-1.688,2.875-1.737,3.005-1.737c0.276,0,0.5,0.224,0.5,0.5c0,0.272-0.218,0.494-0.49,0.5C5.343,1.632,4.436,1.711,3.073,3.073C1.683,4.464,1.629,5.371,1.629,5.38C1.617,5.648,1.396,5.865,1.129,5.865z" />
              <path d="M3.5,8C3.372,8,3.244,7.951,3.146,7.854c-0.195-0.195-0.195-0.512,0-0.707l4-4c0.195-0.195,0.512-0.195,0.707,0s0.195,0.512,0,0.707l-4,4C3.756,7.951,3.628,8,3.5,8z" />
              <path d="M3.529,23.998c-0.747,0-1.447-0.264-1.968-0.784l-0.775-0.775c-0.982-0.981-1.053-2.606-0.173-3.949l2.488-3.291c0.167-0.221,0.479-0.264,0.701-0.097c0.22,0.166,0.264,0.479,0.097,0.7l-2.468,3.263c-0.598,0.915-0.581,2.023,0.063,2.667l0.775,0.775c0.644,0.643,1.752,0.661,2.694,0.043l3.235-2.448c0.22-0.168,0.534-0.124,0.701,0.097c0.167,0.221,0.123,0.534-0.097,0.7l-3.263,2.468C4.894,23.79,4.193,23.998,3.529,23.998z" />
              <path d="M5.371,23.371c-0.146,0-1.323-0.056-3.004-1.737c-1.688-1.688-1.737-2.875-1.737-3.005c0-0.276,0.224-0.5,0.5-0.5c0.273,0,0.495,0.219,0.5,0.489c0.002,0.039,0.082,0.946,1.444,2.309c1.39,1.391,2.297,1.444,2.307,1.444c0.271,0.012,0.49,0.237,0.485,0.509s-0.219,0.489-0.49,0.491C5.373,23.371,5.372,23.371,5.371,23.371z" />
              <path d="M7.5,21c-0.128,0-0.256-0.049-0.354-0.146l-4-4c-0.195-0.195-0.195-0.512,0-0.707s0.512-0.195,0.707,0l4,4c0.195,0.195,0.195,0.512,0,0.707C7.756,20.951,7.628,21,7.5,21z" />
              <path d="M20.5,9c-0.105,0-0.211-0.033-0.301-0.102c-0.22-0.166-0.264-0.479-0.097-0.7l2.468-3.263c0.598-0.915,0.581-2.023-0.063-2.667l-0.775-0.775C21.088,0.85,19.98,0.832,19.037,1.45l-3.235,2.448c-0.222,0.166-0.534,0.123-0.701-0.097c-0.167-0.221-0.123-0.534,0.097-0.7l3.263-2.468c1.372-0.9,2.995-0.83,3.977,0.152l0.775,0.775c0.982,0.981,1.053,2.606,0.173,3.949l-2.488,3.291C20.8,8.932,20.651,9,20.5,9z" />
              <path d="M22.871,5.871c-0.273,0-0.495-0.219-0.5-0.489c-0.002-0.039-0.082-0.946-1.444-2.309c-1.39-1.391-2.297-1.444-2.307-1.444c-0.271-0.012-0.49-0.237-0.485-0.509s0.219-0.489,0.49-0.491c0.139-0.008,1.31,0.039,3.008,1.737c1.688,1.688,1.737,2.875,1.737,3.005C23.371,5.647,23.147,5.871,22.871,5.871z" />
              <path d="M20.5,8c-0.128,0-0.256-0.049-0.354-0.146l-4-4c-0.195-0.195-0.195-0.512,0-0.707s0.512-0.195,0.707,0l4,4c0.195,0.195,0.195,0.512,0,0.707C20.756,7.951,20.628,8,20.5,8z" />
            </g>
          </svg>
        </div>

        {/* Restaurant name */}
        <div
          style={{
            display: "flex",
            fontSize: 64,
            fontWeight: 700,
            color: "#FFFFFF",
            marginBottom: 20,
            textAlign: "center",
            maxWidth: "80%",
          }}
        >
          {restaurantName}
        </div>

        {/* Description */}
        <div
          style={{
            display: "flex",
            fontSize: 28,
            color: "#9CA3AF",
            textAlign: "center",
            maxWidth: "70%",
            lineHeight: 1.4,
          }}
        >
          {description}
        </div>

        {/* Bottom branding */}
        <div
          style={{
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            position: "absolute",
            bottom: 40,
            gap: 8,
          }}
        >
          <span style={{ color: "#6B7280", fontSize: 24, lineHeight: 1 }}>Powered by</span>
          <svg
            width="140"
            height="28"
            viewBox="0 0 3215 603"
            style={{ marginTop: 2 }}
          >
            <g transform="scale(10.77) translate(10, 10)">
              <g transform="matrix(2.61,0,0,2.61,-3.55,-16.98)" fill="#f18a47">
                <path d="M1.36 20 l0 -13.22 l8.64 0 l0 2.86 l-5.28 0 l0 2.28 l4.44 0 l0 2.86 l-4.44 0 l0 5.22 l-3.36 0 z M17.72 20.28 c-4.3 0 -6.52 -2.92 -6.52 -6.92 c0 -4.1 2.32 -6.86 6.64 -6.86 c4.08 0 6.54 2.46 6.54 6.7 c0 4.1 -2.32 7.08 -6.66 7.08 z M17.78 17.5 c1.88 0 3.06 -1.24 3.06 -4.16 c0 -2.88 -1.14 -4.06 -3.02 -4.06 c-1.94 0 -3.08 1.26 -3.08 4.1 c0 2.88 1.16 4.12 3.04 4.12 z" />
              </g>
              <g transform="matrix(1.5,0,0,1.5,65,0)" fill="#f18a47">
                <path d="M12,19c-3.86,0-7-3.141-7-7s3.14-7,7-7s7,3.141,7,7S15.86,19,12,19z M12,6c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6S15.309,6,12,6z" />
                <path d="M20.462,24.001c-0.656,0-1.346-0.203-1.973-0.615l-3.291-2.487c-0.22-0.166-0.264-0.479-0.097-0.7s0.479-0.265,0.701-0.097l3.263,2.468c0.915,0.598,2.023,0.581,2.667-0.063l0.775-0.775c0.644-0.644,0.661-1.752,0.043-2.695l-2.449-3.234c-0.167-0.221-0.123-0.534,0.097-0.7c0.22-0.167,0.533-0.124,0.701,0.097l2.468,3.263c0.899,1.371,0.828,2.996-0.154,3.978l-0.775,0.775C21.916,23.736,21.21,24.001,20.462,24.001z" />
                <path d="M3.5,9C3.349,9,3.2,8.932,3.101,8.802L0.633,5.539c-0.899-1.371-0.828-2.996,0.154-3.978l0.775-0.775c0.982-0.981,2.607-1.054,3.949-0.172l3.291,2.487c0.22,0.166,0.264,0.479,0.097,0.7c-0.167,0.22-0.481,0.263-0.701,0.097L4.935,1.431C4.02,0.833,2.912,0.85,2.269,1.493L1.494,2.269C0.85,2.912,0.833,4.021,1.45,4.964l2.449,3.234c0.167,0.221,0.123,0.534-0.097,0.7C3.711,8.967,3.605,9,3.5,9z" />
                <path d="M3.529,23.998c-0.747,0-1.447-0.264-1.968-0.784l-0.775-0.775c-0.982-0.981-1.053-2.606-0.173-3.949l2.488-3.291c0.167-0.221,0.479-0.264,0.701-0.097c0.22,0.166,0.264,0.479,0.097,0.7l-2.468,3.263c-0.598,0.915-0.581,2.023,0.063,2.667l0.775,0.775c0.644,0.643,1.752,0.661,2.694,0.043l3.235-2.448c0.22-0.168,0.534-0.124,0.701,0.097c0.167,0.221,0.123,0.534-0.097,0.7l-3.263,2.468C4.894,23.79,4.193,23.998,3.529,23.998z" />
                <path d="M20.5,9c-0.105,0-0.211-0.033-0.301-0.102c-0.22-0.166-0.264-0.479-0.097-0.7l2.468-3.263c0.598-0.915,0.581-2.023-0.063-2.667l-0.775-0.775C21.088,0.85,19.98,0.832,19.037,1.45l-3.235,2.448c-0.222,0.166-0.534,0.123-0.701-0.097c-0.167-0.221-0.123-0.534,0.097-0.7l3.263-2.468c1.372-0.9,2.995-0.83,3.977,0.152l0.775,0.775c0.982,0.981,1.053,2.606,0.173,3.949l-2.488,3.291C20.8,8.932,20.651,9,20.5,9z" />
              </g>
              <g transform="matrix(2.61,0,0,2.61,102.45,-16.98)" fill="#f18a47">
                <path d="M1.36 20 l0 -13.22 l5.42 0 c4.34 0 6.46 2.66 6.46 6.36 c0 3.56 -1.98 6.86 -6.44 6.86 l-5.44 0 z M4.72 17.18 l2 0 c1.98 0 2.98 -1.3 2.98 -3.9 c0 -2.54 -0.96 -3.68 -3.1 -3.68 l-1.88 0 l0 7.58 z M18.26 20 l0 -5.4 l-4.62 -7.82 l3.96 0 l2.42 4.36 l2.3 -4.36 l3.72 0 l-4.42 7.92 l0 5.3 l-3.36 0 z" />
              </g>
            </g>
          </svg>
        </div>
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  );
}
